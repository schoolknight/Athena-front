<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
  <title>Athena Service</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="../static/fontawesome/css/all.css">
  <!-- Google Fonts Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="../static/mdb/bootstrap.min.css">
  <!-- Material Design Bootstrap -->
  <link rel="stylesheet" href="../static/mdb/mdb.min.css">
  <!-- Your custom styles (optional) -->
  <link rel="stylesheet" href="../static/css/athena.css">
  <!-- MDBootstrap Datatables  -->
  <link href="../static/mdb/addons/datatables2.min.css" rel="stylesheet">
  <!-- DataTables Select CSS -->
  <link href="../static/mdb/addons/datatables-select2.min.css" rel="stylesheet">

  <!-- jQuery -->
  <script type="text/javascript" src="../static/jquery.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="../static/mdb/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="../static/mdb/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="../static/mdb/mdb.min.js"></script>

  <!-- MDBootstrap Datatables  -->
  <script type="text/javascript" src="../static/mdb/addons/datatables2.min.js"></script>
  <!-- DataTables Select JS -->
  <script src="../static/mdb/addons/datatables-select2.min.js" type="text/javascript"></script>


</head>

<body class="fixed-sn light-blue-skin">
  <header>
    <!-- Sidebar navigation -->
    <div id="slide-out" class="side-nav side-nav-light fixed">
      <ul class="custom-scrollbar">
        <!-- Athena Logo -->
        <li>
          <div class="text-center logo-wrapper waves-light">
            <a href="#" class="pl-0"><img src="../static/img/THU.png" class="img-fluid flex-center" style="height: 95px"></a>
          </div>
        </li>

        <!--/. Athena Logo -->
        <!--Social-->
        <li>
          <ul class="social">
            <li><a href="#" class="icons-sm fb-ic"><i class="fab fa-facebook-f"> </i></a></li>
            <li><a href="#" class="icons-sm pin-ic"><i class="fab fa-pinterest"> </i></a></li>
            <li><a href="#" class="icons-sm gplus-ic"><i class="fab fa-google-plus-g"> </i></a></li>
            <li><a href="#" class="icons-sm tw-ic"><i class="fab fa-twitter"> </i></a></li>
          </ul>
        </li>
        <!--/Social-->
        <!--Search Form-->
        <li>
          <form class="search-form" role="search">
            <div class="form-group md-form mt-0 pt-1 waves-light">
              <input type="text" class="form-control" placeholder="Search">
            </div>
          </form>
        </li>
        <!--/.Search Form-->

        <!-- Side navigation links -->
        <li>
          <ul class="collapsible collapsible-accordion">
            <li><a class="collapsible-header waves-effect arrow-r"><i class="fab fa-servicestack"></i>Service<i class="fas fa-angle-down rotate-icon"></i></a>
              <div class="collapsible-body">
                <ul class="list-unstyled">
                  <li><a href="athena-service" class="waves-effect">Issue service</a>
                  </li>
                  <li><a href="athena-order" class="waves-effect">My orders</a>
                  </li>
                </ul>
              </div>
            </li>
            <li><a class="collapsible-header waves-effect arrow-r"><i class="fas fa-eye"></i> My account<i class="fas fa-angle-down rotate-icon"></i></a>
              <div class="collapsible-body">
                <ul class="list-unstyled">
                  <li><a href="athena-statistics" class="waves-effect">Profile</a>
                  </li>
                  <li><a href="athena-balance" class="waves-effect">Balance</a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
          <!--/. Side navigation links -->
        </li>
        <!--/ Side navigation links -->

      </ul>
      <div class="sidenav-bg purple lighten-3"></div>
    </div>
    <!--/. Sidebar navigation -->

    <!-- Navbar -->
    <nav class="navbar fixed-top navbar-expand-lg scrolling-navbar double-nav">

      <!-- SideNav slide-out button -->
      <div class="float-left">
        <a href="#" data-activates="slide-out" class="button-collapse"><i class="fas fa-bars"></i></a>
      </div>

      <!-- Breadcrumb -->
      <div class="breadcrumb-dn mr-auto">
        <p>Service Panel</p>
      </div>

      <div class="d-flex change-mode">

        <!-- Navbar links -->
        <ul class="nav navbar-nav nav-flex-icons ml-auto">

          <!-- Dropdown -->
          <li class="nav-item dropdown notifications-nav">
            <a class="nav-link dropdown-toggle waves-effect" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="badge green">3</span> <i class="fas fa-bell"></i>
              <span class="d-none d-md-inline-block">Notifications</span>
            </a>
            <div class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="#">
                <i class="fab fa-servicestack" aria-hidden="true"></i>
                <span>Recent service completed</span>
                <span class="float-right"><i class="far fa-clock" aria-hidden="true"></i> 5 min</span>
              </a>
              <a class="dropdown-item" href="#">
                <i class="fab fa-servicestack" aria-hidden="true"></i>
                <span>New service issued</span>
                <span class="float-right"><i class="far fa-clock" aria-hidden="true"></i> 2 min</span>
              </a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link waves-effect"><i class="far fa-comments"></i> <span class="clearfix d-none d-sm-inline-block">Support</span></a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle waves-effect" href="#" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="fas fa-user"></i> <span class="clearfix d-none d-sm-inline-block">Profile</span>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
              <a class="dropdown-item" href="#">Log Out</a>
              <a class="dropdown-item" href="#">My account</a>
            </div>
          </li>

        </ul>
        <!-- Navbar links -->

      </div>

    </nav>
    <!-- Navbar -->

  </header>

  <main>

    <div class="contianer-fluid">

      <div class="mt-lg-5 mb-5">

        <h4 class="text-left font-weight-bold dark-grey-text">Please customize your service product</h4>
        <hr>

      </div>

      <!-- Section: Data -->
      <section class="mt-md-4 pt-md-2 ml-md-5 pl-4 mb-2 pb-1">

        <div class="card border-secondary mb-3">

          <div class="card-header">1.Please select your data</div>

          <!-- Section: Filter -->
          <section>
            <div class="card-body">
              <h5 class="card-title">Filters</h5>
              <div class="row">
                <div class="col">
                  <select id="hospital-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose hospital</option>
                    <option value=0>BH1</option>
                    <option value=1>BH2</option>
                    <option value=2>BH3</option>
                  </select>
                  <label class="mdb-main-label">BH stands for Beijing Hospitals</label>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="col">
                  <select id="department-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose department</option>
                    <option value=0>Internal Medicine</option>
                    <option value=1>Surgery2</option>
                  </select>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="col">
                  <select id="disease-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose disease</option>
                    <option value=0>Diabetes</option>
                    <option value=1>Heart Disease</option>
                  </select>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="col">
                  <select id="gender-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose gender</option>
                    <option value=0>Male</option>
                    <option value=1>Female</option>
                  </select>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="w-100"></div>

                <div class="col">
                  <select id="age_range-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose age range</option>
                    <option value=0>&lt20</option>
                    <option value=1>20-30</option>
                    <option value=2>30-40</option>
                    <option value=3>40-50</option>
                    <option value=4>50-60</option>
                    <option value=5>60-70</option>
                    <option value=6>&gt70</option>
                  </select>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="col"></div>

                <div class="col"></div>

                <div class="col">
                  <button id="data-search" class="btn btn-info btn-sm">Search</button>
                </div>

              </div>
            </div>
          </section>
          <!--/ Section: Filter -->

          <!-- Section: Result -->
          <section>
            <div class="card-body">
              <h5 class="card-title">Results</h5>
              <div class="table-ui p-2 mb-3 mx-4 mb-5">
                <table id="health-record-table" class="table" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th></th>
                      <th class="th-sm">Hospital
                      </th>
                      <th class="th-sm">Department
                      </th>
                      <th class="th-sm">Disease
                      </th>
                      <th class="th-sm">Gender
                      </th>
                      <th class="th-sm">Age Range
                      </th>
                      <th class="th-sm">Hash
                      </th>
                    </tr>
                  </thead>
                  <tbody id='data_table'>

                    <!-- to be filled with javascript -->
                  </tbody>
                </table>
              </div>
            </div>
          </section>
          <!--/ Section: Result -->

        </div>
      </section>
      <!--/ Section: Data -->

      <!-- Section: Function -->
      <section class="mt-md-4 pt-md-2 ml-md-5 pl-4 mb-2 pb-1">
        <div class="card border-secondary mb-3">

          <div class="card-header">2.Please select your function</div>

          <!-- Section: Filter -->
          <section>
            <div class="card-body">
              <h5 class="card-title">Filters</h5>
              <div class="row">
                <div class="col">
                  <select id="region-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose region</option>
                    <option value=0>Beijing-west-1</option>
                    <option value=1>Beijing-west-2</option>
                    <option value=2>Beijing-east</option>
                  </select>
                  <label class="mdb-main-label">Computatation infrastructure region</label>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="col">
                  <select id="core-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose core number</option>
                    <option value=0>1</option>
                    <option value=1>2</option>
                    <option value=2>4</option>
                  </select>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="col">
                  <select id="mem-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose memory size</option>
                    <option value=0>8G</option>
                    <option value=1>16G</option>
                    <option value=2>64G</option>
                  </select>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="col">
                  <select id="function-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose function instance</option>
                    <optgroup label="Statistics">
                      <option value=0>Distribution</option>
                      <option value=1>SUM</option>
                      <option value=2>Median</option>
                    </optgroup>
                    <optgroup label="ML Training">
                      <option value=3>Linear Regression</option>
                      <option value=4>SVM</option>
                    </optgroup>
                    <optgroup label="ML Inference">
                      <option value=5>Linear Model 1</option>
                      </option>
                    </optgroup>
                  </select>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>

                <div class="w-100"></div>

                <div class="col"></div>

                <div class="col"></div>

                <div class="col"></div>

                <div class="col">
                  <button class="btn btn-info btn-sm" data-toggle="collapse" href="#fee-collapse" aria-expanded="false" aria-controls="fee-collapse" onclick="renderFuncPrice()">Price Detail</button>
                </div>

              </div>
            </div>
            <div class="collapse" id="fee-collapse">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Computation Price/min</th>
                    <th>Data Transmission Price/GB</th>
                    <th>Function Price</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">Instance 1</th>
                    <td>40 [Beijing-west-1, 1core, 8GB]</td>
                    <td>80</td>
                    <td id="func"></td>
                  </tr>
                  <tr>
                </tbody>
              </table>
            </div>
          </section>
          <!--/ Section Filter -->

          <!-- Section Input Coloumn -->
          <section>
            <div class="row">
              <div class="col-md-6">
                <div class="card-body">
                  <h5 class="card-title">Input coloumn</h5>
                  <select id="coloumn-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose Input Coloumns</option>
                    <option value=0>bmi - Body Mass Index</option>
                    <option value=1>bp - Average Blood Pressure)</option>
                    <option value=2>s1 - T-Cells</option>
                    <option value=3>s2 - Low-density lipoproteins</option>
                    <option value=4>s3 - High-density lipoproteins</option>
                    <option value=5>s4 - Thyroid Stimulating hormone</option>
                    <option value=6>s5 - Lamotrigine </option>
                    <option value=7>s6 - Blood Sugar Level</option>
                  </select>
                  <label class="mdb-main-label">Diabetes dataset is using</label>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card-body">
                  <h5 class="card-title">Target coloumn</h5>
                  <select id="coloumn-option" class="mdb-select md-form colorful-select dropdown-primary" multiple searchable="Search here..">
                    <option value="" disabled selected>Choose Input Coloumns</option>
                    <option value=0>bmi - Body Mass Index</option>
                    <option value=1>bp - Average Blood Pressure)</option>
                    <option value=2>s1 - T-Cells</option>
                    <option value=3>s2 - Low-density lipoproteins</option>
                    <option value=4>s3 - High-density lipoproteins</option>
                    <option value=5>s4 - Thyroid Stimulating hormone</option>
                    <option value=6>s5 - Lamotrigine </option>
                    <option value=7>s6 - Blood Sugar Level</option>
                  </select>
                  <label class="mdb-main-label">Diabetes dataset is using</label>
                  <button class="btn-save btn btn-primary btn-sm">Save</button>
                </div>
              </div>
            </div>
          </section>
          <!--/ Section Input Coloumn -->

        </div>
      </section>
      <!--/ Section: Function -->

      <!-- Section: Security -->
      <section class="mt-md-4 pt-md-2 ml-md-5 pl-4 mb-2 pb-1">
        <div class="card border-secondary mb-3">
          <div class="card-header">3.Please select your security configurations</div>
          <div class="card-body">
            <h5 class="card-title">Characteristics</h5>
            <!-- Security options -->
            <div class="row">
              <div class="col">
                <p>Data Scrubbing
                  <a href="#" data-toggle="tooltip" title="Guarantee delete-after-use property for raw data"><i class="far fa-question-circle"></i></a>
                </p>
              </div>
              <div class="col">
                <div class="switch">
                  <label>
                    Off
                    <input id="scrub-option" type="checkbox" unchecked>
                    <span class="lever"></span> On
                  </label>
                </div>
              </div>

              <div class="w-100"></div>


              <div class="col">
                <p>Differential Privacy
                  <a href="#" data-toggle="tooltip" title="Add noise to the generated model"><i class="far fa-question-circle"></i></a>
                </p>
              </div>
              <div class="col">
                <div class="switch">
                  <label>
                    Off
                    <input id="dp-option" type="checkbox" unchecked>
                    <span class="lever"></span> On
                  </label>
                </div>
              </div>

              <div class="w-100"></div>

              <div class="col">
                <p>Result Sealing
                  <a href="#" data-toggle="tooltip" title="Use encryption for result transferring"><i class="far fa-question-circle"></i></a>
                </p>
              </div>
              <div class="col">
                <div class="switch">
                  <label>
                    Off
                    <input id="seal-option" type="checkbox" checked>
                    <span class="lever"></span> On
                  </label>
                </div>
              </div>

            </div>
          </div>
        </div>
    </div>
    </section>
    <!--/ Section: Security -->

    <!-- Service confirm -->
    <section class="mt-md-4 pt-md-2 ml-md-5 pl-4 mb-2 pb-1">
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#serviceCart" onclick="renderCart()">Launch Service</button>
      <!--/ Button trigger modal -->

      <!-- Modal: modalCart -->
      <div class="modal fade" id="serviceCart" tabindex="-1" role="dialog" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <!--Header-->
            <div class="modal-header">
              <h4 class="modal-title" id="cartModalLabel">Your service cart</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
            </div>
            <!--Body-->
            <div class="modal-body">

              <table id="cart-table" class="table table-hover">
                <!-- rendered by javascript -->
              </table>

            </div>
            <!--Footer-->
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>
              <button class="btn btn-primary" data-dismiss="modal" onclick="sendTransaction()">Checkout</button>
            </div>
          </div>
        </div>
      </div>
      <!--/ Modal: modalCart -->
    </section>
    <!--/ Service confirm -->

    </div>

  </main>


  <script type="text/javascript">
    // Option List
    const hospitalOption = ["BH1", "BH2", "BH3", "BH4"];
    const regionOption = ["Beijing-west-1", "Beijing-west-2", "Beijing-east"];
    const functionOption = ["Distribution", "SUM", "Median", "Linear Regression", "SVM", "Linear Model-S1"];
    const functionFee = [5, 5, 5, 10, 20, 10];

    // Table Body
    const dataBody = document.querySelector("#health-record-table > tbody");

    // Service Detail
    // service_id & issue_time handle to flask
    var service = {
      hospitals: [],
      record_total: 0,
      record_num: [],
      func: 0,
      func_fee: 0,
      fixed_fee: 0,
      security: {
        scrub: "",
        dp: "",
        seal: ""
      }
    }


    $(document).ready(function() {
      $('.mdb-select').materialSelect();
    });

    $(document).ready(function() {
      $('#data-search').click(function() {
        // LoadData Into Table
        loadData();
      });
    });

    // Tooltips Initialization
    $(function() {
      $('[data-toggle="tooltip"]').tooltip()
    })

    // Sidenav Initialization
    $(".button-collapse").sideNav();

    // Render Price cartDetail
    function renderFuncPrice() {
      var funcPriceStr = "";
      var func = parseInt($('#function-option').val(), 10);
      funcPriceStr += functionOption[func] + ' ' + functionFee[func];
      $('#func').html(funcPriceStr);
    }

    // Render service cart
    function renderCart() {

      console.log("calling renderCart");

      collectOptions();

      var cartDetailStr = "";
      var hospitalStr = "";
      var hosNum = service.record_num.length;
      for (var i = 0; i < hosNum; i++) {
        hospitalStr += '<tr><th scope="row">' + (i + 1).toString() +
          '</th><td>' + hospitalOption[i] +
          '</td><td>' + (service.record_num[i]).toString() + ' rec' +
          '</td><td>' + (service.record_num[i] * 0.5).toString() +
          '</td><td><a><i class="fas fa-times"></i></a></td></tr>';
      }

      cartDetailStr += '<thead>\
                        <tr>\
                          <th>#</th>\
                          <th>Participant</th>\
                          <th>Data/Function</th>\
                          <th>Price(MDS)</th>\
                          <th>Remove</th>\
                        </tr>\
                      </thead>\
                      <tbody>' + hospitalStr +
        '<tr><th scope="row">' + (i++).toString() +
        '</th><td>Infrastructure</td>' +
        '<td>' + functionOption[service.func] +
        '</td><td>' + (service.func_fee).toString() + ', 40/min' +
        '</td><td><a><i class="fas fa-times"></i></a></td></tr>' +
        '<tr class="total"><th scope="row">' + (i++).toString() +
        '</th><td>Fixed Fee</td><td></td>' +
        '<td>' + (service.fixed_fee).toString() +
        '</td><td></td></tr></tbody>'

      $('#cart-table').html(cartDetailStr);
    }

    function collectOptions() {

      console.log("calling collectOptions");

      var hospitals = $('#hospital-option').val();

      service.hospitals = hospitals.map(x => parseInt(x, 10));

      //collect record_num[according to case]

      if (($('#gender-option').val()).length == 1) {
        if(($('#age_range-option').val()).length == 1) {
          service.record_num = [3, 2, 1];
          service.record_total = 6;
        }
        else{
          service.record_num = [68, 90, 77];
          service.record_total = 360;
        }
      }
      else{
        service.record_num = [137, 161, 144];
        service.record_total = 450;
      }

      service.func = parseInt($('#function-option').val(), 10);

      service.func_fee = functionFee[service.func];
      service.fixed_fee = service.record_total * 0.5 + service.func_fee;

      //service.security
      if (document.getElementById('scrub-option').checked) {
        //Switch On
        service.security.scrub = "On";
      } else {
        service.security.scrub = "Off";
      }

      if (document.getElementById('dp-option').checked) {
        service.security.dp = "On";
      } else {
        service.security.dp = "Off";
      }

      if (document.getElementById('seal-option').checked) {
        service.security.seal = "On";
      } else {
        service.security.seal = "Off";
      }

    }

    function loadData() {

      var filter = {
        hospital: [],
        department: 0,
        disease: 0,
        gender: 0,
        age_range: []
      }
      var hospital = $('#hospital-option').val();
      var age_range = $('#age_range-option').val();
      var gender = $('#gender-option').val();
      var department = $('#department-option').val();
      var disease = $('#disease-option').val();

      filter.hospital = hospital.map(x => parseInt(x, 10));
      filter.age_range = age_range.map(x => parseInt(x, 10));
      filter.department = department.map(x => parseInt(x, 10));
      filter.disease = disease.map(x => parseInt(x, 10));
      filter.gender = gender.map(x => parseInt(x, 10));

      var filterJSON = JSON.stringify(filter);

      const request = new XMLHttpRequest();
      request.open("post", "api/data");
      request.setRequestHeader("Content-Type", "application/json");
      request.onload = () => {
        try {
          const json = JSON.parse(request.responseText);
          populateData(json);
        } catch (e) {
          console.log(e);
        }
      };

      request.send(filterJSON);
    }

    function populateData(json) {
      // Clear existing records
      var totStr = ""
      for(var i in json){
        var item = json[i];
        totStr += '<tr><td></td>';
        totStr += '<td>'+item.hospital +'</td>'
        totStr += '<td>'+item.department +'</td>'
        totStr += '<td>'+item.disease +'</td>'
        totStr += '<td>'+item.gender +'</td>'
        totStr += '<td>'+item.age_range +'</td>'
        totStr += '<td>'+item.hash +'</td></tr>'
      }
      $('#data_table').html(totStr);
      $('#health-record-table').dataTable({
        "pagingType": "full",
        columnDefs: [{
          orderable: false,
          className: 'select-checkbox select-checkbox-all',
          targets: 0
        }],
        select: {
          style: 'multi',
          selector: 'td:first-child'
        }
      });
    }

    function sendTransaction() {
      var serviceJSON = JSON.stringify(service);
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/api/service", true);
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.send(serviceJSON);
      console.log("serviceJSON sended!");
    }
  </script>

</body>


</html>
